<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin for Blessing - Ayat Hari Ini</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Lora:italic,wght@0,400;1,700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }

        .wheel-container {
            position: relative;
            width: 320px;
            height: 320px;
            margin: 20px auto;
        }

        #wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid #fff;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1);
            background: conic-gradient(
                #FF6B6B 0deg 36deg, 
                #4ECDC4 36deg 72deg, 
                #FFE66D 72deg 108deg, 
                #1A535C 108deg 144deg, 
                #FF9F1C 144deg 180deg, 
                #70C1B3 180deg 216deg,
                #A29BFE 216deg 252deg,
                #FAB1A0 252deg 288deg,
                #55E6C1 288deg 324deg,
                #FD79A8 324deg 360deg
            );
        }

        .pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: #f00;
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 10;
        }

        .center-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 65px;
            height: 65px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 0.8rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            cursor: pointer;
            z-index: 15;
            user-select: none;
            color: #2D3436;
        }

        .center-button:active {
            transform: translate(-50%, -50%) scale(0.9);
        }

        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
            z-index: 50;
            padding: 20px;
        }

        .verse-card {
            background: white;
            padding: 30px;
            border-radius: 24px;
            max-width: 450px;
            width: 100%;
            text-align: center;
            animation: popIn 0.5s cubic-bezier(0.26, 0.53, 0.74, 1.48);
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .verse-text {
            font-family: 'Lora', serif;
            font-style: italic;
            font-size: 1.25rem;
            color: #2D3436;
            line-height: 1.6;
        }

        /* Toast Notification */
        #toast {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 12px;
            padding: 16px;
            position: fixed;
            z-index: 100;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        #toast.show {
            visibility: visible;
            animation: fadeInOut 2.5s;
        }

        @keyframes fadeInOut {
            0% { bottom: 0; opacity: 0; }
            20% { bottom: 30px; opacity: 1; }
            80% { bottom: 30px; opacity: 1; }
            100% { bottom: 0; opacity: 0; }
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #e2e8f0;
            border-radius: 10px;
        }
    </style>
</head>
<body class="bg-gray-50">

    <header class="text-center mt-10 mb-6 px-6">
        <h1 class="text-4xl font-extrabold text-gray-800 tracking-tight">Daily Blessing</h1>
        <p class="text-gray-500 mt-2">Putar roda untuk menerima ayat kasih dan tantangan harimu!</p>
    </header>

    <main class="flex-grow flex flex-col items-center justify-center w-full max-w-md px-4">
        <div class="wheel-container">
            <div class="pointer"></div>
            <div id="wheel"></div>
            <div class="center-button" id="spinBtn">PUTAR!</div>
        </div>
        
        <p id="status-text" class="mt-8 text-sm font-medium text-gray-400 animate-pulse text-center">
            Ketuk tombol PUTAR untuk memulai berkatmu
        </p>
    </main>

    <!-- Modal Result -->
    <div id="resultModal" class="modal">
        <div class="verse-card shadow-2xl border-t-8 border-pink-500 custom-scrollbar">
            <div class="text-pink-600 font-bold text-xs uppercase tracking-widest mb-3">Ayat Berkat Hari Ini</div>
            <p id="verseText" class="verse-text mb-2">"..."</p>
            <p id="verseRef" class="font-bold text-gray-700 mb-6">...</p>
            
            <hr class="my-6 border-gray-100">
            
            <div class="text-orange-500 font-bold text-xs uppercase tracking-widest mb-2">Tantangan Kasih</div>
            <div class="bg-orange-50 p-4 rounded-xl border border-orange-100 mb-8">
                <p id="challengeText" class="text-gray-700 font-medium italic text-sm">...</p>
            </div>

            <div class="flex flex-col gap-3">
                <button id="shareBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg active:scale-95 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                    </svg>
                    Bagikan Berkat Ini
                </button>
                <button onclick="closeModal()" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-600 font-semibold py-3 px-6 rounded-xl transition-all">
                    Tutup & Simpan di Hati
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast">Teks berkat berhasil disalin!</div>

    <footer class="mt-auto py-6 text-gray-400 text-xs">
        &copy; 2024 Daily Blessing App â€¢ Bagikan Kasih Hari Ini
    </footer>

    <script>
        // Data Ayat & Tantangan
        const data = [
            { verse: "Sebab Aku ini mengetahui rancangan-rancangan apa yang ada pada-Ku mengenai kamu, demikianlah firman TUHAN, yaitu rancangan damai sejahtera dan bukan rancangan kecelakaan, untuk memberikan kepadamu hari depan yang penuh harapan.", ref: "Yeremia 29:11", challenge: "Tuliskan 3 hal yang membuatmu optimis tentang masa depanmu hari ini." },
            { verse: "Segala perkara dapat kutanggung di dalam Dia yang memberi kekuatan kepadaku.", ref: "Filipi 4:13", challenge: "Lakukan satu tugas yang paling kamu hindari hari ini dengan semangat." },
            { verse: "Janganlah hendaknya kamu kuatir tentang apapun juga, tetapi nyatakanlah dalam segala hal keinginanmu kepada Allah dalam doa dan permohonan dengan ucapan syukur.", ref: "Filipi 4:6", challenge: "Berhenti mengeluh selama 3 jam ke depan. Setiap kali ingin mengeluh, gantilah dengan ucapan syukur." },
            { verse: "Kasih itu sabar; kasih itu murah hati; ia tidak cemburu. Ia tidak memegahkan diri dan tidak sombong.", ref: "1 Korintus 13:4", challenge: "Bersabarlah kepada seseorang yang biasanya membuatmu kesal hari ini." },
            { verse: "Serahkanlah segala kekuatiranmu kepada-Nya, sebab Ia yang memelihara kamu.", ref: "1 Petrus 5:7", challenge: "Luangkan waktu 5 menit untuk duduk diam dan menyerahkan beban pikiranmu dalam doa." },
            { verse: "Tetapi orang-orang yang menanti-nantikan TUHAN mendapat kekuatan baru: mereka seumpama rajawali yang naik terbang dengan kekuatan sayapnya.", ref: "Yesaya 40:31", challenge: "Berikan semangat kepada teman yang sedang merasa lelah atau putus asa." },
            { verse: "Bersukacitalah senantiasa dalam Tuhan! Sekali lagi kukatakan: Bersukacitalah!", ref: "Filipi 4:4", challenge: "Bagikan satu pesan lucu atau kabar baik kepada grup chat keluarga/temanmu." },
            { verse: "Berilah dan kamu akan diberi: suatu takaran yang baik, yang dipadatkan, yang digoncang dan yang tumpah ke luar akan dicurahkan ke dalam ribaanmu.", ref: "Lukas 6:38", challenge: "Traktir seseorang kopi atau makanan ringan tanpa alasan khusus." },
            { verse: "Percayalah kepada TUHAN dengan segenap hatimu, dan janganlah bersandar kepada pengertianmu sendiri.", ref: "Amsal 3:5", challenge: "Cobalah untuk tidak mengatur segala sesuatu hari ini, biarkan Tuhan yang menuntun langkahmu." },
            { verse: "Inilah perintah-Ku, yaitu supaya kamu saling mengasihi, sama seperti Aku telah mengasihi kamu.", ref: "Yohanes 15:12", challenge: "Kirimkan pesan apresiasi kepada orang tua atau saudaramu sekarang juga." }
        ];

        let currentRotation = 0;
        let isSpinning = false;
        let selectedData = null;

        const wheel = document.getElementById('wheel');
        const spinBtn = document.getElementById('spinBtn');
        const resultModal = document.getElementById('resultModal');
        const shareBtn = document.getElementById('shareBtn');
        const toast = document.getElementById('toast');

        function spinWheel() {
            if (isSpinning) return;

            isSpinning = true;
            const randomDegree = Math.floor(Math.random() * 360) + 3600; 
            currentRotation += randomDegree;
            
            wheel.style.transform = `rotate(${currentRotation}deg)`;

            setTimeout(() => {
                isSpinning = false;
                const actualDegree = currentRotation % 360;
                let index = Math.floor((360 - (actualDegree % 360)) / 36);
                if (index === 10) index = 0;
                
                showResult(data[index]);
            }, 4000);
        }

        function showResult(item) {
            selectedData = item;
            document.getElementById('verseText').innerText = `"${item.verse}"`;
            document.getElementById('verseRef').innerText = item.ref;
            document.getElementById('challengeText').innerText = item.challenge;
            resultModal.style.display = 'flex';
        }

        function closeModal() {
            resultModal.style.display = 'none';
        }

        function showToast(message) {
            toast.innerText = message;
            toast.className = "show";
            setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 2500);
        }

        async function shareBlessing() {
            if (!selectedData) return;

            const shareText = `âœ¨ Berkat Hari Ini âœ¨\n\n"${selectedData.verse}"\n(${selectedData.ref})\n\nðŸŽ¯ Tantangan Kasih:\n${selectedData.challenge}\n\nDibagikan dari Daily Blessing App.`;

            if (navigator.share) {
                try {
                    await navigator.share({
                        title: 'Daily Blessing',
                        text: shareText,
                        url: window.location.href
                    });
                } catch (err) {
                    console.log("Error sharing:", err);
                }
            } else {
                // Fallback: Copy to Clipboard
                const textArea = document.createElement("textarea");
                textArea.value = shareText;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showToast("Teks berkat berhasil disalin ke clipboard!");
                } catch (err) {
                    showToast("Gagal menyalin teks.");
                }
                document.body.removeChild(textArea);
            }
        }

        // Event Listeners
        spinBtn.addEventListener('click', spinWheel);
        shareBtn.addEventListener('click', shareBlessing);

        window.onclick = function(event) {
            if (event.target == resultModal) {
                closeModal();
            }
        }
    </script>
</body>
</html>
